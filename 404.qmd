---
title: "404"
---

```{ojs}
//| echo: false

chart = {

    const colorScale = d3.scaleOrdinal(d3.schemeSpectral[11])
        .domain([0, keys.length])

  // Create the SVG container.
  const svg = d3.create("svg")
      .attr("width", width)
      .attr("height", height)
      .attr("viewBox", [0, 0, width, height])
      .attr("style", "max-width: 100%; height: auto;");

  // Append a group for each series, and a rect for each element in the series.
  svg.append("g")
    .selectAll()
    .data(series)
    .enter()
    .append('path')
        .attr('d', area)
        .style('fill', (d,i) => colorScale(i))
        .style('stroke', 'black')
        .append('title').text(d => d.key)

  return svg.node();
}

```




```{ojs}
//| echo: false

sorted = raw_points.sort(d => (d.year)).filter(d => d.type != 'conference')
pre_timeline = Array.from(d3.group(sorted, d=> d.year))

function ark(){
    let data = []
    let omega = sorted.map(d => d.year).sort(d => d)[0]
    let alpha = sorted.map(d => d.end).sort(d => -d)[0]

    console.log(alpha, omega)

    for (let start_year of pre_timeline) {
        for (let x = alpha ; x <= omega; x++ ){
            let year = start_year[0]
            let row = {
                label: `Started ${year}`,
                year: x,
                cnt: start_year[1].filter(d => d.year <= x & d.end >= x).length
                }
            data.push(row)
        }
    }
    return data
}

data = ark()

keys = d3.union(data.map(d => d.label))
years = Array.from(d3.union(data.map(d => d.year)))

series = d3.stack().order(d3.stackOrderReverse)
.offset(d3.stackOffsetSilhouette)
    .keys(keys)
    .value(([, D], key) => D.get(key).cnt)
    (d3.index(data, d=> d.year, d => d.label))

width = 200;
height = 800;
marginTop = 0;
marginRight = 0;
marginBottom = 0;
marginLeft = 0;

yearScale = d3.scaleLinear()
        .domain([2001, 2026])
      .rangeRound([height - marginBottom, marginTop]);

countScale = d3.scaleLinear()
      .domain([-40, 40])
        .range([marginLeft, width - marginRight])

area = d3.area().y((d,i) => yearScale(years[i]))
    .x1(d => countScale(d[0]))
    .x0(d => countScale(d[1]))
```


```{ojs}
//| echo: false

yaml = require('js-yaml')
projaml = FileAttachment('./projects.yaml').text()
confyaml = FileAttachment('./conference.yaml').text()

towns = FileAttachment('towns.json').json()

conf_data = yaml.load(confyaml).map((d) => ({
  name : d.title,
  town: d.town,
  coordinates : towns.find((t) => (t.name == d.town)).coordinates,
  region : towns.find((t) => (t.name == d.town)).region,
  type: 'conference',
  year: d.year,
  end: d.end,
  days: d.days

}))
sorted_c = conf_data.sort(d => d.end)

raw_points = [].concat(
conf_data,
yaml.load(projaml).map((d) => ({
  name : d.name,
  town: d.town,
  coordinates : towns.find((t) => (t.name == d.town)).coordinates,
  region : towns.find((t) => (t.name == d.town)).region,
  type: 'project',
  year: d.year,
  end: d.end,
  url: d.url

}))
)

gathered_points = raw_points.sort((d) => (d.end, d.name))
```
